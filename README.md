# Обработка для сравнения кода в режиме 1С:Предприятие

![Платформа 1С](https://img.shields.io/badge/1с_platform-8.3.20.1838-yellow.svg)
[![GitHub release](https://img.shields.io/github/release/vandalsvq/1c_code_diff.svg)](https://github.com/vandalsvq/1c_code_diff/releases)

Обработка предназначеня для сравнения кода в режиме 1С:Предприятие без использования внешних компонент.

![Главное окно](imgs/main.png)

## Возможности

* построение дерева методов с учетом областей (в разработке)
* отдельная подсветка комментариев к методам (в разработке)
* отдельная подсветка изменений Асинх и Экспорт (в разработке)
* построчное сравнение текстов модулей

## Дополнительная информация

* Минимальная версия платформы 8.3.18 (используются методы Асинх)
* Алгоритм построчного сравнения реализован на базе [разработки с Инфостарт](https://infostart.ru/public/581384/). Автор: Игорь Пашутин

Методика сравнения:
* Сначала программа обрабатывает тексты модулей и "забивает" все комментарии и строковые значения (символом #), а так же заменяет ";"
* После подготовки текста программа строит дерево областей и методов
* При активизации строки метода, программа выполняет построчное сравнения и заносит данные в таблицы лево и право. Сравнение выполняется один раз, далее просто фильтруются строки

Тестировалось на модулях 4-6 тысяч строк, скорость вполне приемлимая. Самая долгая операция построение дерева. Так же предполагается, что тексты отдельных методов не будут превышать 1000 строк. Иначе из-за особенностей реализации методики построчного сравнения, расчет различий может выполняться длительное время.

### Про батарейки
В обработке используются некоторые процедуры из общих модулей БСП. В частности: ОбщегоНазначения, ОбщегоНазначенияКлиент, ОбщегоНазначенияКлиентСервер, СтроковыеФункцииКлиентСервер. Как говорится "batteries not included", поэтому рекомендую открывать в конфигурациях, основанных на БСП.